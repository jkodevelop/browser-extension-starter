{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","window","browser","matches","h1Texts","B","message","document","body","style","border","log","response","handleResponse","console","concat","addEventListener","runtime","sendMessage","greeting","handleClickResponse","querySelectorAll","notifyBackgroundPage","push","h1","textContent","dest","key","value","sender","sendResponse","title"],"mappings":"cAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,MAAM,IAAIK,MAAM,uBAAuBL,EAAE,KAAK,IAAIM,EAAET,EAAEG,GAAG,CAACO,QAAQ,IAAIX,EAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGO,QAAkD,IAA1C,IAAIH,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAArZ,CAAyZ,CAACW,EAAE,CAAC,SAASP,EAAQQ,EAAOJ,GAArbK,OAACC,QAAkBD,OAAaX,WAAGW,OAAMZ,SAAIY,OAAIhB,OAAgD,IAoD3FkB,EA7BNC,EAvBiGC,EAAAJ,OAAGC,SAAMA,QAA6FN,SAAAA,EAAQU,GAATC,SAAXC,KAAAC,MAAAC,OAAA,kBAAwBzB,QAAA0B,IAAA1B,wCAAAA,OAAkCqB,EAAAM,WA+CrP,SAASC,EAAeP,GA7BxBQ,QAAAH,IAAA,wCAAAI,OAA4BT,EAAAM,WAR5BX,OAAAe,iBAAA,QAaA,SAA8BhC,GAvBmSuB,SAAMC,KAAAC,MAAOjB,OAAS,iBAA+Ca,EAAAY,QAAAC,YAAA,CAA3BC,SAAA,oCA6BvWC,KAlBJb,SAAAC,KAAAC,MAAAC,OAAA,kBAyCMP,EAAUI,SAASC,KAAKa,iBAAiB,MA7B/CjB,EAASkB,GACPf,EAAAA,QAASC,SAAWE,GAgClBN,EAAQmB,KAAKC,EAAGC,eA5BhBN,QAAAA,IAAAA,6BAAUhB,EAAAL,QAIZO,EAAAY,QAAAC,YAAA,CACAQ,KAAA,gBACAC,IAAA,KACAC,MAAAxB,GACAS,GAgBAR,EAAAY,QAAId,UAAUI,YAJdO,SAAAR,EAAAuB,EAAAC,GACDhB,QAAAH,IAAA,2CA2BCmB,EAAavB,SAASwB,UAvBtB,KAAA,GAAI3B,CAAAA","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// content script cannot use require\nwindow.browser = (function () {\n  return window.msBrowser ||\n    window.browser ||\n    window.chrome;\n})();\nvar B = window.browser || browser;\n\n//////////////////////////////////////////////////////////////////////////\n// EXAMPLE 1: onClick on the page, send message to background\n//            background will respond back\n//////////////////////////////////////////////////////////////////////////\nfunction handleClickResponse(message) {\n  document.body.style.border = \"5px solid green\";\n  console.log(`Message from the background script:  ${message.response}`);\n}\n\nfunction handleError(error) {\n  document.body.style.border = \"5px solid red\";\n  console.log(`Error: ${error}`);\n}\n\nfunction notifyBackgroundPage(e) {\n  document.body.style.border = \"5px solid blue\";\n  // this is lowest common denominator\n  // A\n  var sending = B.runtime.sendMessage({\n    greeting: \"Greeting from the content script\"\n  },handleClickResponse);\n\n  // this uses promise, only worked for mozilla 2020, chrome didn't allow it\n  // B\n  // var sending = B.runtime.sendMessage({\n  //   greeting: \"Greeting from the content script\"\n  // });\n  // sending.then(handleResponse, handleError);  \n}\n\nwindow.addEventListener(\"click\", notifyBackgroundPage);\ndocument.body.style.border = \"5px solid black\";\n\n\n//////////////////////////////////////////////////////////////////////////\n// EXAMPLE 2: this runs when script loads into matching url then parse the website content \n//            and send date to background to be saved in localStorage\n//////////////////////////////////////////////////////////////////////////\nfunction handleResponse(message) {\n  console.log(`Message from the background script:  ${message.response}`);\n}\n\nfunction getH1TextForPopupDisplay(){\n  var matches = document.body.querySelectorAll(\"h1\");\n  var h1Texts = [];\n  matches.forEach(function(h1){\n    // console.log(h1.textContent);\n    h1Texts.push(h1.textContent);\n  });\n  console.log('number of matches for h1: ', matches.length);\n\n  var sending = B.runtime.sendMessage({\n    \"dest\":\"default_popup\",\n    \"key\": \"h1\",\n    \"value\": h1Texts\n  },handleResponse);  \n}\n// run when script is injected\ngetH1TextForPopupDisplay();\n\n\n//////////////////////////////////////////////////////////////////////////\n// EXAMPLE 3: this listens to Browser_Action messages, (can do something in dom)\n//            can even communicate information back through function callback\n//////////////////////////////////////////////////////////////////////////\nfunction gotMessage (message, sender, sendResponse) {\n  console.log(\"got message from browser action onClick\");\n  sendResponse(document.title);\n}\nB.runtime.onMessage.addListener(gotMessage);\n},{}]},{},[1])"]}