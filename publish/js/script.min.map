{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","B","browser","_require","onClick","domId","console","log","addEventListener","msgFromContentScript","localStorage","getItem","JSON","parse","innerText","tabs","query","active","currentWindow","url","classList","add","remove","../sharedjs/browser-polyfill.js","./helpers.js","2","document","getElementById","handleResponse","body","style","border","concat","htmlTitle","disabled","_browser","includes","sendMessage","alert","3","window","msBrowser"],"mappings":"cAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,MAAM,IAAIK,MAAM,uBAAuBL,EAAE,KAAK,IAAIM,EAAET,EAAEG,GAAG,CAACO,QAAQ,IAAIX,EAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGO,QAAkD,IAA1C,IAAIH,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAArZ,CAAyZ,CAACW,EAAE,CAAC,SAASP,EAAQQ,EAAOJ,GACrb,IADCK,EACgBT,EAAQ,oCADxBU,QAAkCC,EAASX,EAAA,gBAANY,EAAHD,EAAGC,QAAMC,EAATF,EAASE,MAACC,QAAAC,IAAK,wBAAKF,EAAA,cAAMG,iBAAgB,QAAhBJ,GAAN,GAAoI,IAAAK,EAAA,OAAAC,aAAAC,QAAA,MAAAC,KAAAC,MAAAH,aAAA,IAAA,EAAAL,EAAA,eAAWS,UAWnML,EAXmM,oBAAAA,EAAAX,OAAX,GAAkHG,EAAAc,KAAAC,MAAA,CAAAC,QAAA,EAAAC,eAAA,GAAA,SAAAH,GAoBxR,2EAAhBA,EAAK,GAAGI,IApBgSd,EAAA,qBAAAe,UAAAC,IAAA,WAuBzShB,EAAM,qBAAqBe,UAAUE,OAAO,cAvB2T,CAAAC,kCAAA,EAAAC,eAAA,IAAAC,EAAA,CAAA,SAAAjC,EAAAQ,EAAAJ,GAA2BR,IAA3Ba,EAA2BT,EAAA,oCAA3BU,QAAmC,SAAOd,EAAP4B,GAA9Y,OAAyZU,SAAAC,eAAAX,GAEzZ,SAAKY,EAAe1B,GAkClBwB,SAASG,KAAKC,MAAMC,OAAS,iBAhC/B1B,EAAA,eAA2Bb,UAA3B,kBAAAwC,OAAAC,GAAA5B,EAAQD,cAARU,UAAA,WAAAT,EAAiBA,cAAjB6B,UAAA,EAHAlC,EAAAJ,QAAMuC,MAAW3C,EAqDjBQ,EAAOJ,QAAQQ,QAhDfC,SAAMrB,GAENiB,EAAAc,KAAAC,MAAA,CAAAC,QAAA,EAAAC,eAAA,GAAA,SAAAH,GACAA,EAAA,GAAAI,IAAAiB,SAAA,0EAKE/B,EAAAA,KAAKgC,YAACtB,EAAeD,GAAAA,GAHpBL,CACDJ,QAAM,uBAENuB,GA+BIU,MAAM,8GA1BE,CAAAf,kCAAD,IAAAgB,EAAA,CAAA,SAAA/C,EAAAQ,EAAAJ,GAAiB,IAAAM,EAAwBsC,OAAAC,WACpDD,OAAGzB,SACDV,OAAAA,OAEAA,EAAAA,QAAMH,GACP,KAAA,GAAA,CAAA","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nconst _browser = require(\"../sharedjs/browser-polyfill.js\");\nvar B = _browser || browser;\n\nconst { onClick, domId } = require('./helpers.js');\nconsole.log('Hello Web Extension!');\ndomId('HellWebext').addEventListener('click', onClick, false);\n// if the content script has sent data to background then it will store the data in localStorage\n// the value if not a string should be a JSON.stringify string.\n// so JSON.parse() to restore the stored object JSON form\nvar msgFromContentScript = localStorage.getItem(\"h1\") !== null ? JSON.parse(localStorage[\"h1\"]) : 0;\nif(msgFromContentScript){\n  domId('MainContent').innerText = \"# of <h1> found: \" + msgFromContentScript.length;\n}else{\n  domId('MainContent').innerText = \"\";  \n}\n\n// on popup load, check the active tab url and change some of the content's html\n// hide link to https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions if tab is already there\nB.tabs.query({'active': true, 'currentWindow': true}, function (tabs) {\n  if(tabs[0].url === \"https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions\"){\n    domId('TestContentScript').classList.add(\"hide-it\");\n  }else{\n    domId('TestContentScript').classList.remove(\"hide-it\");\n  }\n});\n},{\"../sharedjs/browser-polyfill.js\":3,\"./helpers.js\":2}],2:[function(require,module,exports){\nconst _browser = require(\"../sharedjs/browser-polyfill.js\");\nvar B = _browser || browser;\n\nfunction domId(query){\n  return document.getElementById(query);\n}\nmodule.exports.domId = domId;\n\nfunction handleResponse(htmlTitle) {\n  document.body.style.border = \"5px solid blue\";\n  domId('MainContent').innerText = `Title of site: ${htmlTitle}`;\n  domId('HellWebext').innerText = \"disabled\";\n  domId('HellWebext').disabled = true;\n}\n\nfunction onClick(e) {\n  B.tabs.query({active: true, currentWindow: true}, function(tabs) {\n    if(!tabs[0].url.includes('https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions')) {\n      alert('please go to https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions for demonstration.')\n      return;\n    }\n    const payload = {\n      \"message\": \"from browser action\"\n    };\n    B.tabs.sendMessage(tabs[0].id, payload, handleResponse);\n  });\n}\nmodule.exports.onClick = onClick;\n\n\n},{\"../sharedjs/browser-polyfill.js\":3}],3:[function(require,module,exports){\nvar browser = (function () {\n  return window.msBrowser ||\n    window.browser ||\n    window.chrome;\n})();\nmodule.exports = browser;\n},{}]},{},[1])"]}